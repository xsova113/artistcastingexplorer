import{ar as gn,as as vn,at as bn,au as jn,r as d,av as he,aw as ke,ax as ae,u as Y,ay as Rt,s as A,az as yn,j as e,P as fe,E as me,aA as de,Q as we,aB as Me,aC as L,aD as _n,ag as re,aE as Pn,aF as kt,aG as ne,af as wn,m as Se,aH as Sn,C as Q,F as M,T as R,ao as Mt,f as D,B,x as Ot,aI as Ie,ah as In,aJ as Cn,R as En,aK as Tn,aL as Dn,aM as Rn,y as kn,v as zt,aN as Mn,aO as On,aP as zn,aQ as Ln,aR as ie,e as Oe,b as ze,A as An,aS as Bn,aT as Nn,aU as Wn,aV as ee,aW as Fn,aX as $n,aY as le,g as Hn,aZ as Le,a_ as $,w as V,a$ as Vn,b0 as xe,i as Lt,S as At,b1 as Un,b2 as Gn,D as Kn,b3 as Xn,b4 as Yn,q as Ae,b5 as Jn,b6 as qn,b7 as Ue,b8 as ge,b9 as Bt,ba as Zn,bb as Nt,h as Wt,bc as Qn,bd as es,be as se,bf as Ft,bg as ts,bh as ns,d as ss,bi as os,bj as as,bk as $t,bl as rs,K,a2 as X,t as is,a9 as Ht,bm as ls,bn as Vt,bo as Ce,bp as Ut,bq as Gt,br as Ge,bs as cs,bt as Kt,bu as ds,bv as us,bw as ps,bx as Be,by as hs,bz as Ee,bA as fs,Y as U,bB as ms,bC as be,bD as xs,bE as gs,bF as vs,bG as bs,L as js,N as Ke,bH as Ne,bI as ys,bJ as _s,bK as Ps,bL as je,H as ws,bM as Xe,bN as Te,bO as Xt,a5 as Ss,bP as Is,bQ as Cs,bR as We,bS as Es,bT as Ts,bU as Ds,bV as Yt,bW as Rs,bX as ks,bY as De,bZ as Ms,b_ as Os,b$ as zs,c0 as Ls,a as As,c1 as Bs,c2 as Ns,c3 as Ws,c4 as Fs,c5 as $s,c6 as Hs,c7 as Ye,V as Vs,W as Us,c8 as Gs,c9 as Jt,ca as qt,cb as Zt,cc as Qt,cd as Ks,ce as Xs,cf as Ys,cg as Js,ch as qs,ci as Zs,cj as Qs,ck as Re,cl as ye}from"./sanity-7c1eff0b.js";import{H as eo,J as to}from"./json-inspector-7256214b.js";function en(n,t){var s=typeof t=="object";return new Promise(function(a,o){var l=new gn({next:function(r){a(r),l.unsubscribe()},error:o,complete:function(){s?a(t.defaultValue):o(new vn)}});n.subscribe(l)})}function no(){return bn(function(n,t){var s,a=!1;n.subscribe(jn(t,function(o){var l=s;s=o,a&&t.next([l,o]),a=!0}))})}const Fe=n=>{const{actions:t,children:s,actionProps:a,onActionComplete:o}=n;return e.jsx(Ft,{onReset:o,hooks:t,args:a,children:s})},so=n=>{const{badges:t,children:s,badgeProps:a,...o}=n;return e.jsx(Ft,{...o,hooks:t,args:a,children:s})},oo=[];function ao(n){const{children:t,flatIndex:s,index:a,params:o,payload:l,siblingIndex:r}=n,{navigate:i,navigateIntent:c,resolvePathFromState:u}=he(),h=ke(),{panes:p,expand:f}=Ae(),m=d.useMemo(()=>(h==null?void 0:h.panes)||oo,[h==null?void 0:h.panes]),v=d.useMemo(()=>p==null?void 0:p[p.length-2],[p]),g=a-1,w=d.useCallback(y=>{const j=m[g]||[],_=j[r],T=y(j,_),k=[...m.slice(0,g),T,...m.slice(g+1)];return{...h||{},panes:k}},[g,m,h,r]),b=d.useCallback(y=>{const j=w(y);return setTimeout(()=>i(j),0),j},[w,i]),x=d.useCallback(y=>{const j=w((_,T)=>[..._.slice(0,r),{...T,params:y},..._.slice(r+1)]);return u(j)},[w,u,r]),P=d.useCallback(y=>{b((j,_)=>[...j.slice(0,r),{..._,payload:y},...j.slice(r+1)])},[b,r]),S=d.useCallback(y=>{b((j,_)=>[...j.slice(0,r),{..._,params:y},...j.slice(r+1)])},[b,r]),I=d.useCallback(y=>{let{id:j,parentRefPath:_,type:T,template:k}=y;i({panes:[...m.slice(0,g+1),[{id:j,params:{template:k.id,parentRefPath:ts(_),type:T},payload:k.params}]]})},[g,i,m]),E=d.useMemo(()=>({index:s,groupIndex:g,siblingIndex:r,payload:l,params:o,hasGroupSiblings:m[g]?m[g].length>1:!1,groupLength:m[g]?m[g].length:0,routerPanesState:m,ChildLink:ns,BackLink:ss,ReferenceChildLink:os,handleEditReference:I,ParameterizedLink:as,replaceCurrent:function(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};b(()=>[{id:y.id||"",payload:y.payload,params:y.params||{}}])},closeCurrent:()=>{b((y,j)=>y.length>1?y.filter(_=>_!==j):y)},closeCurrentAndAfter:function(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)&&v&&f(v.element),i({panes:[...m.slice(0,g)]},{replace:!0})},duplicateCurrent:y=>{b((j,_)=>{const T={..._,payload:(y==null?void 0:y.payload)||_.payload,params:(y==null?void 0:y.params)||_.params};return[...j.slice(0,r),T,...j.slice(r)]})},setView:y=>{const j=$t(o,"view");return S(y?{...j,view:y}:j)},setParams:S,setPayload:P,createPathWithParams:x,navigateIntent:c}),[s,g,r,l,o,m,I,S,P,x,c,b,v,i,f]);return e.jsx(rs.Provider,{value:E,children:t})}function ro(n,t,s,a){var o,l;const r={flex:n.left.flex+n.right.flex,width:n.left.width+n.right.width},i=(o=t.minWidth)!=null?o:Re,c=(l=s.minWidth)!=null?l:Re,u=Math.min(t.maxWidth||1/0,r.width-c),h=Math.min(s.maxWidth||1/0,r.width-i);let p=i-n.left.width;const f=n.right.width-h;p<f&&(p=f);let m=n.right.width-c;const v=u-n.left.width;m>v&&(m=v);const g=Math.min(Math.max(a,p),m),w=n.left.width+g,b=n.right.width-g,x=w/r.width*r.flex,P=b/r.width*r.flex;return{leftFlex:x,leftW:w,rightFlex:P,rightW:b}}function io(n,t){const s=[];let a=t;for(;a!==n;){const o=a.parentElement;if(!o)return s;const r=Array.from(o.childNodes).indexOf(a);if(s.unshift(r),o===n)return s;a=o}return s}const Je=[];function lo(n,t){const s=new WeakMap;for(const o of t)s.set(o,io(n,o));const a=(o,l)=>{const r=s.get(o)||Je,i=s.get(l)||Je,c=Math.max(r.length,i.length);for(let u=0;u<c;u+=1){const h=r[u]||-1,p=i[u]||-1;if(h!==p)return h-p}return 0};t.sort(a)}function co(){const n=[],t=[],s=new WeakMap,a=new Set,o={};let l=null,r=0,i=null,c=new Map,u=!1;function h(x){a.add(x),i===x&&(i=null),b()}function p(x){a.delete(x),i=x,b()}function f(x,P){return s.set(x,{...P,original:P}),t.push(x),l&&lo(l,t),p(x),()=>{const S=t.indexOf(x);S>-1&&t.splice(S,1),s.delete(x),b()}}function m(x,P,S){var I,E,y,j;const _=t.indexOf(P),T=s.get(P);if(!T)return;const k=t[_+1],O=s.get(k);if(O){if(x==="start"&&(u=!0,o.left={element:P,flex:T.flex||1,width:P.offsetWidth},o.right={element:k,flex:O.flex||1,width:k.offsetWidth},b()),x==="move"&&o.left&&o.right){c=new Map;const{leftW:C,rightW:z,leftFlex:N,rightFlex:W}=ro(o,T,O,S);c.set(P,{flex:N,width:C}),c.set(k,{flex:W,width:z}),b()}if(x==="end"){u=!1;const C=c.get(P),z=c.get(k);s.set(P,{...T,currentMinWidth:0,currentMaxWidth:(I=T.maxWidth)!=null?I:1/0,flex:(E=C==null?void 0:C.flex)!=null?E:T.flex}),s.set(k,{...O,currentMinWidth:0,currentMaxWidth:(y=T.maxWidth)!=null?y:1/0,flex:(j=z==null?void 0:z.flex)!=null?j:O.flex}),c=new Map,delete o.left,delete o.right,b()}}}function v(x){l=x}function g(x){r=x,b()}function w(x){return n.push(x),()=>{const P=n.push(x);P>-1&&n.splice(P,1)}}return{collapse:h,expand:p,mount:f,resize:m,setRootElement:v,setRootWidth:g,subscribe:w};function b(){var x,P,S,I;if(!r)return;const E=[];for(const C of t)C!==i&&E.unshift(C);i&&E.unshift(i);const y=new WeakMap,j=E.length,_=E[0],T=(j-1)*ye;let k=r-T;for(const C of E){const z=s.get(C);if(!z)continue;const N=z.currentMinWidth||z.minWidth||Re,W=C===_,ce=a.has(C),F=N>k,G=W?!1:ce||F,H=c.get(C);y.set(C,{element:C,collapsed:G,currentMinWidth:(x=H==null?void 0:H.width)!=null?x:z.currentMinWidth,currentMaxWidth:(P=H==null?void 0:H.width)!=null?P:z.currentMaxWidth,flex:(I=(S=H==null?void 0:H.flex)!=null?S:z.flex)!=null?I:1}),G?k-=ye:k-=N-ye}const O=[];for(const C of t){const z=y.get(C);z&&O.push(z)}for(const C of n)C({expandedElement:i||t[t.length-1]||null,panes:O,resizing:u})}}function uo(n){const{children:t,minWidth:s,onCollapse:a,onExpand:o,...l}=n,r=d.useMemo(()=>co(),[]),[i,c]=d.useState(null),u=xe(i),h=(u==null?void 0:u.width)||0,p=h===void 0||!s?void 0:h<s,[f,m]=d.useState({expandedElement:null,panes:[],resizing:!1});d.useEffect(()=>r.setRootElement(i),[r,i]),d.useEffect(()=>r.setRootWidth(h),[r,h]),d.useEffect(()=>r.subscribe(m),[r]),d.useEffect(()=>{p!==void 0&&(p&&a&&a(),!p&&o&&o())},[p,a,o]);const v=d.useMemo(()=>({collapse:r.collapse,collapsed:p,expand:r.expand,expandedElement:f.expandedElement,mount:r.mount,panes:f.panes,resize:r.resize,resizing:f.resizing}),[p,r,f.expandedElement,f.panes,f.resizing]);return e.jsx(Ys.Provider,{value:v,children:e.jsx(Js,{"data-ui":"PaneLayout",...l,"data-collapsed":p?"":void 0,"data-resizing":f.resizing?"":void 0,"data-mounted":h?"":void 0,ref:c,children:t})})}function po(n){const{documentId:t,documentType:s,flex:a}=n,{collapsed:o}=Oe(),{closeInspector:l,inspector:r}=L(),{features:i}=Y(),c=d.useCallback(()=>{r&&l(r.name)},[l,r]);if(o||!r)return null;const u=d.createElement(r.component,{onClose:c,documentId:t,documentType:s});return i.resizablePanes?e.jsx(vs,{as:"aside","data-ui":"DocumentInspectorPanel",flex:a,maxWidth:bs,minWidth:Ee,children:u}):e.jsx(D,{as:"aside","data-ui":"DocumentInspectorPanel",flex:a,children:u})}var ho=Object.defineProperty,fo=(n,t,s)=>t in n?ho(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s,_e=(n,t,s)=>(fo(n,typeof t!="symbol"?t+"":t,s),s);class Z extends Error{constructor(t){let{message:s,context:a,helpId:o,cause:l}=t;super(s),_e(this,"cause"),_e(this,"context"),_e(this,"helpId"),this.context=a,this.helpId=o,this.cause=l}}const qe=new WeakMap;function ve(n){const t=qe.get(n);if(t)return t;const s=qs();return qe.set(n,s),s}const Ze=new WeakMap;function tn(n,t){const s=Ze.get(n)||new Map;if(s){const l=s.get(t);if(l)return l}const a=n[t];if(typeof a!="function")throw new Error("Expected property `".concat(t,"` to be a function but got ").concat(typeof a," instead."));const o=a.bind(n);return s.set(t,o),Ze.set(n,s),o}const mo=n=>!!n&&typeof(n==null?void 0:n.then)=="function",xo=n=>ae(n)?typeof n.serialize=="function":!1,go=n=>(t,s,a)=>{try{return n(t,s,a)}catch(o){throw o instanceof Z?o:new Z({message:typeof(o==null?void 0:o.message)=="string"?o.message:"",context:s,cause:o})}},vo=n=>function(){return n(...arguments).pipe(Zs(1),Qs())};function nn(n){const t=go(vo(n((s,a,o)=>{if(!s)throw new Z({message:"Pane returned no child",context:a,helpId:"structure-item-returned-no-child"});return mo(s)||Fs(s)?$s(s).pipe(Ne(l=>t(l,a,o))):xo(s)?t(s.serialize(a),a,o):typeof s=="function"?t(s(a.id,a),a,o):X(s)})));return t}async function bo(n){const t=new Map,a=nn(c=>(u,h,p)=>{const f=u&&"".concat(ve(u),"-").concat(h.path.join("__")),m=f&&t.get(f);if(m)return m;const v=c(u,h,p);return f&&t.set(f,v),v}),o=[[{id:"__edit__".concat(n.params.id),params:{...$t(n.params,["id"]),type:n.params.type},payload:n.payload}]];async function l(c){let{currentId:u,flatIndex:h,intent:p,params:f,parent:m,path:v,payload:g,unresolvedPane:w,levelIndex:b,structureContext:x}=c;var P;if(!w)return[];const{id:S,type:I,...E}=f,j=await en(a(w,{id:u,splitIndex:0,parent:m,path:v,index:h,params:{},payload:void 0,structureContext:x},h));return j.type==="document"&&j.id===S?[{panes:[...v.slice(0,v.length-1).map(_=>[{id:_}]),[{id:S,params:E,payload:g}]],depthIndex:v.length,levelIndex:b}]:(P=j.canHandleIntent)!=null&&P.call(j,p,f,{pane:j,index:h})||j.type==="documentList"&&j.schemaTypeName===I&&j.options.filter==="_type == $type"?[{panes:[...v.map(_=>[{id:_}]),[{id:f.id,params:E,payload:g}]],depthIndex:v.length,levelIndex:b}]:j.type==="list"&&j.child&&j.items?(await Promise.all(j.items.map((_,T)=>_.type==="divider"?Promise.resolve([]):l({currentId:_._id||_.id,flatIndex:h+1,intent:p,params:f,parent:j,path:[...v,_.id],payload:g,unresolvedPane:typeof j.child=="function"?tn(j,"child"):j.child,levelIndex:T,structureContext:x})))).flat():[]}const i=(await l({currentId:"root",flatIndex:0,levelIndex:0,intent:n.intent,params:n.params,parent:null,path:[],payload:n.payload,unresolvedPane:n.rootPaneNode,structureContext:n.structureContext})).sort((c,u)=>c.depthIndex===u.depthIndex?c.levelIndex-u.levelIndex:c.depthIndex-u.depthIndex)[0];return i?i.panes:o}const jo=(n,t)=>{const s=n.replace(/^__edit__/,""),{params:a,payload:o,structureContext:{resolveDocumentNode:l}}=t,{type:r,template:i}=a;if(!r)throw new Error("Document type for document with ID ".concat(s," was not provided in the router params."));let c=l({schemaType:r,documentId:s}).id("editor");return i&&(c=c.initialValueTemplate(i,o)),c.serialize()};function yo(n){var t,s;return"contextHash(".concat(JSON.stringify({id:n.id,parentId:parent&&ve(parent),path:n.path,index:n.index,splitIndex:n.splitIndex,serializeOptionsIndex:(t=n.serializeOptions)==null?void 0:t.index,serializeOptionsPath:(s=n.serializeOptions)==null?void 0:s.path}),")")}const Qe=n=>{const t={type:n.type,id:n.routerPaneSibling.id,params:n.routerPaneSibling.params||{},payload:n.routerPaneSibling.payload||null,flatIndex:n.flatIndex,groupIndex:n.groupIndex,siblingIndex:n.siblingIndex,path:n.path,paneNode:n.type==="resolvedMeta"?ve(n.paneNode):null};return"metaHash(".concat(JSON.stringify(t),")")};function ue(n){let{unresolvedPane:t,flattenedRouterPanes:s,parent:a,path:o,resolvePane:l,structureContext:r}=n;const[i,...c]=s,u=c[0],h={id:i.routerPaneSibling.id,splitIndex:i.siblingIndex,parent:a,path:[...o,i.routerPaneSibling.id],index:i.flatIndex,params:i.routerPaneSibling.params||{},payload:i.routerPaneSibling.payload,structureContext:r};try{return l(t,h,i.flatIndex).pipe(Ne(p=>{const f={type:"resolvedMeta",...i,paneNode:p,path:h.path},m=c.map((g,w)=>({type:"loading",path:[...h.path,...c.slice(w).map((P,S)=>"[".concat(g.flatIndex+S,"]"))],paneNode:null,...g}));if(!c.length)return X([f]);let v;return u!=null&&u.routerPaneSibling.id.startsWith("__edit__")?v=ue({unresolvedPane:jo,flattenedRouterPanes:c,parent:a,path:h.path,resolvePane:l,structureContext:r}):i.groupIndex===(u==null?void 0:u.groupIndex)?v=ue({unresolvedPane:t,flattenedRouterPanes:c,parent:a,path:o,resolvePane:l,structureContext:r}):v=ue({unresolvedPane:typeof p.child=="function"?tn(p,"child"):p.child,flattenedRouterPanes:c,parent:p,path:h.path,resolvePane:l,structureContext:r}),Ht(X([f,...m]),v.pipe(K(g=>[f,...g])))}))}catch(p){if(p instanceof Z&&(p.context&&console.warn("Pane resolution error at index ".concat(p.context.index).concat(p.context.splitIndex>0?" for split pane index ".concat(p.context.splitIndex):"",": ").concat(p.message).concat(p.helpId?" - see ".concat(Xt(p.helpId)):""),p),p.helpId==="structure-item-returned-no-child"))return X([]);throw p}}function _o(n){let{routerPanesStream:t,rootPaneNode:s,initialCacheState:a={cacheKeysByFlatIndex:[],flattenedRouterPanes:[],resolvedPaneCache:new Map,resolvePane:()=>Hs},structureContext:o}=n;return t.pipe(K(r=>[[{id:"root"}],...r]),K(r=>r.flatMap((c,u)=>c.map((h,p)=>({routerPaneSibling:h,groupIndex:u,siblingIndex:p}))).map((c,u)=>({...c,flatIndex:u}))),js([]),no(),K(r=>{let[i,c]=r;for(let u=0;u<c.length;u++){const h=i[u],p=c[u];if(!we(h,p))return{flattenedRouterPanes:c,diffIndex:u}}return{flattenedRouterPanes:c,diffIndex:c.length}}),Ke((r,i)=>{const{cacheKeysByFlatIndex:c,resolvedPaneCache:u}=r,{flattenedRouterPanes:h,diffIndex:p}=i,f=c.slice(0,p+1),m=c.slice(p+1),v=new Set(f.flatMap(b=>Array.from(b))),g=m.flatMap(b=>Array.from(b)).filter(b=>!v.has(b));for(const b of g)u.delete(b);return{flattenedRouterPanes:h,cacheKeysByFlatIndex:c,resolvedPaneCache:u,resolvePane:nn(b=>(x,P,S)=>{const I=x&&"".concat(ve(x),"-").concat(yo(P)),E=I&&u.get(I);if(E)return E;const y=b(x,P,S);if(!I)return y;const j=c[S]||new Set;return j.add(I),c[S]=j,u.set(I,y),y})}},a),Ne(r=>{let{flattenedRouterPanes:i,resolvePane:c}=r;return ue({unresolvedPane:s,flattenedRouterPanes:i,parent:null,path:[],resolvePane:c,structureContext:o})})).pipe(Ke((r,i)=>i.map((c,u)=>{const h=r[u];return!h||c.type!=="loading"?c:h.routerPaneSibling.id===c.routerPaneSibling.id?h:c}),[]),ys((r,i)=>{if(r.length!==i.length)return!1;for(let c=0;c<i.length;c++){const u=r[c],h=i[c];if(Qe(u)!==Qe(h))return!1}return!0}))}function Po(){const n=d.useMemo(()=>new _s(1),[]),t=d.useMemo(()=>n.asObservable().pipe(K(a=>(a==null?void 0:a.panes)||[])),[n]),{state:s}=he();return d.useEffect(()=>{n.next(s)},[s,n]),t}function wo(){const[n,t]=d.useState();if(n)throw n;const{structureContext:s,rootPaneNode:a}=Y(),[o,l]=d.useState({paneDataItems:[],resolvedPanes:[],routerPanes:[]}),r=Po();return d.useEffect(()=>{const c=_o({rootPaneNode:a,routerPanesStream:r,structureContext:s}).pipe(K(u=>{const h=u.reduce((m,v)=>{const g=m[v.groupIndex]||[];return g[v.siblingIndex]=v.routerPaneSibling,m[v.groupIndex]=g,m},[]),p=h.length,f=u.map(m=>{var v;const{groupIndex:g,flatIndex:w,siblingIndex:b,routerPaneSibling:x,path:P}=m,S=x.id,I=h[g+1];return{active:g===p-2,childItemId:(v=I==null?void 0:I[0].id)!=null?v:null,index:w,itemId:x.id,groupIndex:g,key:"".concat(m.type==="loading"?"unknown":m.paneNode.id,"-").concat(S,"-").concat(b),pane:m.type==="loading"?se:m.paneNode,params:x.params||{},path:P.join(";"),payload:x.payload,selected:w===u.length-1,siblingIndex:b}});return{paneDataItems:f,routerPanes:h,resolvedPanes:f.map(m=>m.pane)}})).subscribe({next:u=>l(u),error:u=>t(u)});return()=>c.unsubscribe()},[a,r,s]),o}async function So(n,t,s){if(t&&s)return{id:t,type:s};if(!t&&s)return{id:Ps(),type:s};if(t&&!s){const a=await en(n.resolveTypeForDocument(t));return{id:t,type:a}}throw new Z({message:"Neither document `id` or `type` was provided when trying to resolve intent."})}const Io={},Co=d.memo(function(){const{navigate:t}=he(),s=ke(d.useCallback(c=>{const u=typeof c.intent=="string"?c.intent:void 0;return u?{intent:u,params:ae(c.params)?c.params:Io,payload:c.payload}:void 0},[])),{rootPaneNode:a,structureContext:o}=Y(),l=Rt(),[r,i]=d.useState(null);if(r)throw r;return d.useEffect(()=>{if(s){const{intent:c,params:u,payload:h}=s;let p=!1;async function f(){const{id:m,type:v}=await So(l,typeof u.id=="string"?u.id:void 0,typeof u.type=="string"?u.type:void 0);if(p)return;const g=await bo({intent:c,params:{...u,id:m,type:v},payload:h,rootPaneNode:a,structureContext:o});p||t({panes:g},{replace:!0})}return f().catch(i),()=>{p=!0}}},[l,s,t,a,o]),null});var et=Object.freeze,Eo=Object.defineProperty,To=(n,t)=>et(Eo(n,"raw",{value:et(t||n.slice())})),tt;const Do=A.span(tt||(tt=To([`
  &:not(:last-child)::after {
    content: ' ➝ ';
    opacity: 0.5;
  }
`])));function Ro(n){return n.replace(/\(\.\.\.\)\./g,`(...)
  .`).replace(/__WEBPACK_IMPORTED_MODULE_\d+_+/g,"").replace(/___default\./g,".").replace(new RegExp(" \\(https?:\\/\\/".concat(window.location.host),"g")," (")}function ko(n){let{error:t}=n;if(!(t instanceof Z))throw t;const{cause:s}=t,a=(s==null?void 0:s.stack)||t.stack,o=a&&!(s instanceof je)&&!t.message.includes("Module build failed:"),l=s instanceof je?s.path:[],r=s instanceof je&&s.helpId||t.helpId,i=d.useCallback(()=>{window.location.reload()},[]);return e.jsx(U,{height:"fill",overflow:"auto",padding:4,sizing:"border",tone:"critical",children:e.jsxs(Q,{children:[e.jsx(ws,{as:"h2",children:"Encountered an error while reading structure"}),e.jsxs(U,{marginTop:4,padding:4,radius:2,overflow:"auto",shadow:1,tone:"inherit",children:[l.length>0&&e.jsxs(V,{space:2,children:[e.jsx(Xe,{children:"Structure path"}),e.jsx(Te,{children:l.slice(1).map((c,u)=>e.jsx(Do,{children:c},"".concat(c,"-").concat(u)))})]}),e.jsxs(V,{marginTop:4,space:2,children:[e.jsx(Xe,{children:"Error"}),e.jsx(Te,{children:o?Ro(a):t.message})]}),r&&e.jsx(D,{marginTop:4,children:e.jsx(R,{children:e.jsx("a",{href:Xt(r),rel:"noopener noreferrer",target:"_blank",children:"View documentation"})})}),e.jsx(D,{marginTop:4,children:e.jsx(B,{text:"Reload",icon:Ot,tone:"primary",onClick:i})})]})]})})}function Mo(n){const{isSelected:t,pane:s,paneKey:a}=n,o=ae(s)&&s.type||null;return e.jsxs(fe,{id:a,selected:t,children:[e.jsx(ze,{title:"Unknown pane type"}),e.jsx(me,{children:e.jsx(D,{padding:4,children:typeof o=="string"?e.jsxs(R,{as:"p",muted:!0,children:["Structure item of type ",e.jsx("code",{children:o})," is not a known entity."]}):e.jsxs(R,{as:"p",muted:!0,children:["Structure item is missing required ",e.jsx("code",{children:"type"})," property."]})})})]})}function Oo(n){const t=[{ms:300,message:"Loading…"},{ms:5e3,message:"Still loading…"}],s=X(null);return Ss(...t.map(a=>{let{ms:o,message:l}=a;return s.pipe(Is(l),Cs(o))}))}var nt=Object.freeze,zo=Object.defineProperty,Lo=(n,t)=>nt(zo(n,"raw",{value:nt(t||n.slice())})),st;const Ao="Loading…",Bo=A(M)(st||(st=Lo([`
  opacity: 0;
  transition: opacity 200ms;

  &[data-mounted] {
    opacity: 1;
  }
`]))),oe=d.memo(n=>{const{delay:t=300,flex:s,message:a=Oo,minWidth:o,paneKey:l,path:r,selected:i,title:c,tone:u}=n,h=d.useMemo(()=>typeof a=="function"?a(r?r.split(";"):[]):a,[a,r]),[p,f]=d.useState(()=>typeof h=="string"?h:Ao);d.useEffect(()=>{if(typeof h!="object"||typeof h.subscribe=="function")return;const x=h.subscribe(f);return()=>x.unsubscribe()},[h]);const[m,v]=d.useState(null),[g,w]=d.useState(!1);d.useEffect(()=>{if(m)return yn(()=>w(!0))},[m]);const b=e.jsxs(Bo,{align:"center","data-mounted":g?"":void 0,direction:"column",height:"fill",justify:"center",ref:v,children:[e.jsx(zt,{muted:!0}),(c||p)&&e.jsx(D,{marginTop:3,children:e.jsx(R,{align:"center",muted:!0,size:1,children:c||p})})]});return e.jsx(fe,{flex:s,id:l,minWidth:o,selected:i,tone:u,children:e.jsx(me,{children:b})})});oe.displayName="LoadingPane";const No={component:d.lazy(()=>de(()=>import("./index-9cbc91eb-2c95709b.js"),["static/index-9cbc91eb-2c95709b.js","static/sanity-7c1eff0b.js"])),document:d.lazy(()=>de(()=>import("./index-3e9457ce-ac148cdb.js"),["static/index-3e9457ce-ac148cdb.js","static/sanity-7c1eff0b.js","static/json-inspector-7256214b.js"])),documentList:d.lazy(()=>de(()=>import("./index-9b184a3d-beba7c38.js"),["static/index-9b184a3d-beba7c38.js","static/sanity-7c1eff0b.js","static/PaneItem-47ff6ab4-415c2237.js","static/json-inspector-7256214b.js"])),list:d.lazy(()=>de(()=>import("./index-f4b3c5f5-025d3ce5.js"),["static/index-f4b3c5f5-025d3ce5.js","static/sanity-7c1eff0b.js","static/PaneItem-47ff6ab4-415c2237.js"]))},Wo=d.memo(function(t){const{active:s,childItemId:a,groupIndex:o,index:l,itemId:r,pane:i,paneKey:c,params:u,payload:h,path:p,selected:f,siblingIndex:m}=t,v=No[i.type]||Mo;return e.jsx(ao,{flatIndex:l,index:o,params:u,payload:h,siblingIndex:m,children:e.jsx(d.Suspense,{fallback:e.jsx(oe,{paneKey:c,path:p,selected:f}),children:e.jsx(v,{childItemId:a||"",index:l,itemId:r,isActive:s,isSelected:f,paneKey:c,pane:i})})})},(n,t)=>{let{params:s={},payload:a=null,...o}=n,{params:l={},payload:r=null,...i}=t;if(!we(s,l)||!we(a,r))return!1;const c=new Set([...Object.keys(o),...Object.keys(i)]);for(const u of c)if(o[u]!==i[u])return!1;return!0});function sn(n){const{children:t,currentMinWidth:s,flex:a,minWidth:o,paneKey:l,title:r="Error",tone:i="critical"}=n;return e.jsxs(fe,{currentMinWidth:s,flex:a,id:l,minWidth:o,tone:i,children:[e.jsx(ze,{title:r}),e.jsx(me,{overflow:"auto",children:e.jsx(D,{paddingX:4,paddingY:5,children:t})})]})}function Fo(n){return n==="delete"?`An error occurred while attempting to delete this document.
      This usually means that there are other documents that refers to it.`:n==="unpublish"?`An error occurred while attempting to unpublish this document.
      This usually means that there are other documents that refers to it.`:"An error occurred during ".concat(n)}function $o(n){return n==="publish"?"The document was published":n==="unpublish"?"The document was unpublished. A draft has been created from the latest published version.":n==="discardChanges"?"All changes since last publish has now been discarded. The discarded draft can still be recovered from history":n==="delete"?"The document was successfully deleted":"Successfully performed ".concat(n," on document")}const Ho=["patch","commit"],Vo=d.memo(function(){const{push:t}=Me(),{documentId:s,documentType:a}=L(),o=_n(s,a),l=d.useRef(o),r=re();return d.useEffect(()=>{if(!o||o===l.current)return;let i;return o.type==="error"&&t({closable:!0,duration:3e4,status:"error",title:Fo(o.op),description:e.jsxs("details",{children:[e.jsx("summary",{children:"Details"}),o.error.message]})}),o.type==="success"&&!Ho.includes(o.op)&&t({closable:!0,status:"success",title:$o(o.op)}),o.type==="success"&&o.op==="delete"&&(i=setTimeout(()=>r.closeCurrentAndAfter(),0)),l.current=o,()=>clearTimeout(i)},[o,r,t]),null});function Uo(n,t,s){const a=Pn(),[o,l]=d.useState(s),r=d.useMemo(()=>a.forNamespace("desk-tool"),[a]),i=d.useMemo(()=>n?r.forNamespace(n).forKey(t):r.forKey(t),[r,n,t]);d.useEffect(()=>{const u=i.listen(s).subscribe({next:l});return()=>u==null?void 0:u.unsubscribe()},[s,t,n,i]);const c=d.useCallback(u=>{l(u),i.set(u)},[i]);return d.useMemo(()=>[o,c],[c,o])}const J={id:"parsed",title:"Parsed"},q={id:"raw",title:"Raw JSON"},Go=[J,q],pe=eo(1e3);function on(n,t){const s=pe.get(n);return s===void 0?(pe.set(n,Array.isArray(t)||ae(t)),on(n,t)):s}function Ko(n){const{path:t}=n,s=pe.get(t);s!==void 0&&pe.set(t,!s)}function an(n){const t=window.getSelection();if(t){const s=document.createRange();t.removeAllRanges(),s.selectNodeContents(n),t.addRange(s)}}function ot(n){an(n.currentTarget)}function Xo(n){n.keyCode===65&&(n.metaKey||n.ctrlKey)&&(n.preventDefault(),an(n.currentTarget))}function Yo(n){return ae(n)&&Ye(n._id)&&Ye(n._type)}var at=Object.freeze,Jo=Object.defineProperty,qo=(n,t)=>at(Jo(n,"raw",{value:at(t||n.slice())})),rt;const Zo=A.div(n=>{let{theme:t}=n;const{color:s,fonts:a,space:o}=t.sanity;return kt(rt||(rt=qo([`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: `,`;
      font-size: `,`px;
      line-height: `,`px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: `,`;
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: `,`;
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: '▸ ';
      margin-left: calc(0 - `,` + 3px);
      font-size: `,`px;
      line-height: `,`px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: '▾ ';
      font-size: `,`px;
      line-height: `,`px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: `,`;
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: `,`;
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: `,`;
    }

    & .json-inspector .json-inspector__value_string {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_boolean {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_number {
      color: `,`;
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: '↔';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `])),a.code.family,a.code.sizes[2].fontSize,a.code.sizes[2].lineHeight,ne(o[4]),ne(o[3]),ne(o[4]),a.code.sizes[2].fontSize,a.code.sizes[2].lineHeight,a.code.sizes[2].fontSize,a.code.sizes[2].lineHeight,ne(o[4]/2),s.syntax.property,s.syntax.constant,ne(o[3]),s.syntax.string,s.syntax.boolean,s.syntax.number)});function Qo(n){const{onChange:t,query:s}=n,a=d.useCallback(o=>t(o.target.value),[t]);return e.jsx(Vs,{icon:Us,onChange:a,placeholder:"Search",radius:2,value:s||""})}function ea(n){const{value:t}=n,{onInspectClose:s,paneKey:a}=L(),o="".concat(a,"_inspect_"),[l,r]=Uo("desk-tool","inspect-view-preferred-view-mode-".concat(a),"parsed"),i=Go.find(h=>h.id===l),c=d.useCallback(()=>{r(J.id)},[r]),u=d.useCallback(()=>{r(q.id)},[r]);return e.jsx(We,{id:"".concat(o,"dialog"),header:Yo(t)?e.jsxs(e.Fragment,{children:["Inspecting"," ",e.jsx("em",{children:e.jsx(Es,{document:t})})]}):e.jsx("em",{children:"No value"}),onClose:s,onClickOutside:s,width:3,children:e.jsxs(M,{direction:"column",height:"fill",children:[e.jsx(U,{padding:3,shadow:1,style:{position:"sticky",bottom:0,zIndex:3},children:e.jsxs(Vt,{space:1,children:[e.jsx(Ce,{"aria-controls":"".concat(o,"tabpanel"),fontSize:1,id:"".concat(o,"tab-").concat(J.id),label:J.title,onClick:c,selected:i===J}),e.jsx(Ce,{"aria-controls":"".concat(o,"tabpanel"),fontSize:1,id:"".concat(o,"tab-").concat(q.id),label:q.title,onClick:u,selected:i===q})]})}),e.jsxs(Ts,{"aria-labelledby":"".concat(o,"tab-").concat(l),flex:1,id:"".concat(o,"tabpanel"),overflow:"auto",padding:4,style:{outline:"none"},children:[i===J&&e.jsx(Zo,{children:e.jsx(to,{data:t,isExpanded:on,onClick:Ko,search:Qo})}),i===q&&e.jsx(Te,{language:"json",tabIndex:0,onKeyDown:Xo,onDoubleClick:ot,onFocus:ot,children:JSON.stringify(t,null,2)})]})]})})}var it=Object.freeze,ta=Object.defineProperty,na=(n,t)=>it(ta(n,"raw",{value:it(t||n.slice())})),lt;const sa=A(U)(lt||(lt=na([`
  position: relative;
  z-index: 50;
`])));function oa(n){let{revisionId:t}=n;const{documentId:s,documentType:a}=L(),{restore:o}=Ds(s,a),{navigateIntent:l}=he(),r=d.useCallback(()=>{t&&(o.execute(t),l("edit",{id:s,type:a}))},[s,a,l,o,t]);return e.jsx(sa,{"data-testid":"deleted-document-banner",shadow:1,tone:"transparent",children:e.jsx(Q,{paddingX:4,paddingY:t?2:3,sizing:"border",width:1,children:e.jsxs(M,{align:"center",children:[e.jsx(R,{size:1,children:e.jsx(Yt,{})}),e.jsxs(M,{align:"center",gap:2,flex:1,marginLeft:3,children:[e.jsx(R,{size:1,children:"This document has been deleted."}),t&&e.jsx(B,{fontSize:1,padding:2,mode:"bleed",tone:"primary",onClick:r,text:"Restore most recent version"})]})]})})})}var ct=Object.freeze,aa=Object.defineProperty,rn=(n,t)=>ct(aa(n,"raw",{value:ct(t||n.slice())})),dt,ut;const ra=A(U)(dt||(dt=rn([`
  position: relative;
  z-index: 50;
`]))),pt=A(R)(ut||(ut=rn([`
  & > * {
    overflow: hidden;
    overflow: clip;
    white-space: nowrap;
    text-overflow: ellipsis;
  }
`]))),ln=d.memo(()=>{var n,t,s,a,o,l;const r=wn(),{params:i,groupIndex:c,routerPanesState:u,replaceCurrent:h,BackLink:p}=re(),f=(n=u[c])==null?void 0:n[0].id,m=u[c-1],v=m==null?void 0:m[0],g=v==null?void 0:v.id,w=!!((t=v==null?void 0:v.params)!=null&&t.rev),b=d.useMemo(()=>(i==null?void 0:i.parentRefPath)&&Se(i.parentRefPath)||null,[i==null?void 0:i.parentRefPath]),x=Sn(()=>{const I=b==null?void 0:b[0];if(!g||!I||!b)return X({loading:!1});const E=is(g),y=Se(I),j=y.findIndex(_=>typeof _=="object"&&"_key"in _);return Ht(X({loading:!0}),r.unstable_observePathsDocumentPair(E,j===-1?y:y.slice(0,j)).pipe(ls(750),K(_=>{let{draft:T,published:k}=_;var O;return{loading:!1,result:{availability:{draft:T.availability,published:k.availability},refValue:(O=Rs(T.snapshot||k.snapshot,b))==null?void 0:O._ref}}})))},[r,g,b],{loading:!0}),P=d.useCallback(()=>{var I;x.loading||(I=x.result)!=null&&I.refValue&&h({id:x.result.refValue,params:i})},[x.loading,x.result,h,i]);return!g||!b||w||x.loading||!((s=x.result)!=null&&s.availability.draft.available)&&!((a=x.result)!=null&&a.availability.published.available)||((o=x.result)==null?void 0:o.refValue)===f?null:e.jsx(ra,{shadow:1,tone:"caution","data-testid":"reference-changed-banner",children:e.jsx(Q,{paddingX:4,paddingY:2,sizing:"border",width:1,children:e.jsxs(M,{align:"center",children:[e.jsx(R,{size:1,children:e.jsx(Mt,{})}),(l=x.result)!=null&&l.refValue?e.jsxs(e.Fragment,{children:[e.jsx(D,{flex:1,marginLeft:3,children:e.jsx(pt,{title:"This reference has changed since you opened it.",size:1,children:"This reference has changed since you opened it."})}),e.jsx(D,{marginLeft:3,children:e.jsx(B,{onClick:P,icon:Ot,fontSize:1,mode:"ghost",padding:2,space:2,text:"Reload reference"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{flex:1,marginLeft:3,children:e.jsx(pt,{title:"This reference has been removed since you opened it.",size:1,children:"This reference has been removed since you opened it."})}),e.jsx(D,{marginLeft:3,children:e.jsx(B,{as:p,icon:Ie,fontSize:1,mode:"ghost",padding:2,space:2,text:"Close reference"})})]})]})})})});ln.displayName="ReferenceChangedBanner";var ht=Object.freeze,ia=Object.defineProperty,la=(n,t)=>ht(ia(n,"raw",{value:ht(t||n.slice())})),ft;const ca=A(U)(ft||(ft=la([`
  position: relative;
  z-index: 50;
`])));function da(n){let{granted:t,requiredPermission:s}=n;var a,o;const l=ks(),r=((a=l==null?void 0:l.roles)==null?void 0:a.length)!==1,i=ua(((o=l==null?void 0:l.roles)==null?void 0:o.map(c=>e.jsx("code",{children:c.title},c.name)))||[],", ");return t?null:e.jsx(ca,{"data-testid":"permission-check-banner",shadow:1,tone:"transparent",children:e.jsx(Q,{paddingX:4,paddingY:3,sizing:"border",width:1,children:e.jsxs(M,{align:"flex-start",children:[e.jsx(R,{size:1,children:e.jsx(Yt,{})}),e.jsx(D,{flex:1,marginLeft:3,children:e.jsxs(R,{size:1,children:["Your role",r&&"s"," ",i," ",r?"do":"does"," not have permissions to"," ",s," this document."]})})]})})})}function ua(n,t){return n.reduce((s,a)=>s===null?[a]:s.concat([t,a]),null)}function pa(n){const t=d.useRef();return d.useEffect(()=>{t.current=n},[n]),t.current}const ha=1e3*60*60*24*24;function fa(n){const t=Me(),s=pa(n.enabled);d.useEffect(()=>{!s&&n.enabled&&t.push({...n,duration:ha}),s&&!n.enabled&&t.push({...n,duration:.01})},[n,t,s])}const ma=n=>n.preventDefault(),xa=d.forwardRef(function(t,s){var a;const{hidden:o,margins:l}=t,{collapsedFieldSets:r,collapsedPaths:i,displayed:c,editState:u,documentId:h,documentType:p,fieldActions:f,onChange:m,validation:v,ready:g,formState:w,onFocus:b,onBlur:x,onSetCollapsedPath:P,onPathOpen:S,onSetCollapsedFieldSet:I,onSetActiveFieldGroup:E}=L(),y=Rt(),j=In(h),_=d.useMemo(()=>Cn(),[]),T=(a=u==null?void 0:u.transactionSyncLock)==null?void 0:a.enabled;fa({id:"sync-lock-".concat(h),status:"warning",enabled:T,title:"Syncing document…",description:"Please hold tight while the document is synced. This usually happens right after the document has been published, and it shouldn't take more than a few seconds"}),d.useEffect(()=>{const N=y.pair.documentEvents(h,p).pipe(En(W=>{W.type==="mutation"&&_.publish(ga(W)),W.type==="rebase"&&_.publish(va(W))})).subscribe();return()=>{N.unsubscribe()}},[h,y,p,_]);const k=!!(c!=null&&c._rev);d.useEffect(()=>{k&&_.publish({type:"mutation",patches:[],snapshot:c})},[k]);const[O,C]=d.useState(null);d.useEffect(()=>{g&&!(w!=null&&w.focusPath.length)&&O&&Tn(O)},[g]);const z=d.useCallback(N=>{C(N),typeof s=="function"?s(N):s&&(s.current=N)},[s]);return e.jsx(Q,{hidden:o,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:e.jsx(Dn,{margins:l,children:e.jsx(D,{as:"form",onSubmit:ma,ref:z,children:g?w===null?e.jsx(D,{padding:2,children:e.jsx(R,{children:"This form is hidden"})}):e.jsx(Rn,{__internal_fieldActions:f,__internal_patchChannel:_,collapsedFieldSets:r,collapsedPaths:i,focusPath:w.focusPath,changed:w.changed,focused:w.focused,groups:w.groups,id:"root",members:w.members,onChange:m,onFieldGroupSelect:E,onPathBlur:x,onPathFocus:b,onPathOpen:S,onSetFieldSetCollapsed:I,onSetPathCollapsed:P,presence:j,readOnly:w.readOnly,schemaType:w.schemaType,validation:v,value:w.value}):e.jsx(kn,{ms:300,children:e.jsxs(M,{align:"center",direction:"column",height:"fill",justify:"center",children:[e.jsx(zt,{muted:!0}),e.jsx(D,{marginTop:3,children:e.jsx(R,{align:"center",muted:!0,size:1,children:"Loading document"})})]})})})})})});function ga(n){const t=n.mutations.map(s=>s.patch).filter(Boolean);return{type:"mutation",snapshot:n.document,patches:De(n.origin,t)}}function va(n){const t=n.remoteMutations.map(a=>a.patch).filter(Boolean),s=n.localMutations.map(a=>a.patch).filter(Boolean);return{type:"rebase",snapshot:n.document,patches:De("remote",t).concat(De("local",s))}}function ba(){const{activeViewId:n,paneKey:t,views:s}=L(),a="".concat(t,"tabpanel");return e.jsx(Vt,{space:1,children:s.map((o,l)=>{var r;return e.jsx(ja,{icon:o.icon,id:"".concat(t,"tab-").concat(o.id),isActive:n===o.id,label:e.jsx(e.Fragment,{children:o.title}),tabPanelId:a,viewId:l===0?null:(r=o.id)!=null?r:null},o.id)})})}function ja(n){const{isActive:t,tabPanelId:s,viewId:a,...o}=n,{ready:l}=L(),{setView:r}=re(),i=d.useCallback(()=>r(a),[r,a]);return e.jsx(Ce,{...o,"aria-controls":s,disabled:!l,fontSize:1,selected:t,onClick:i})}function ya(){const{connectionState:n,schemaType:t,title:s,value:a}=L(),o=!!a&&n==="connected",{error:l,value:r}=Ut({enabled:o,schemaType:t,value:a});return n!=="connected"?e.jsx(e.Fragment,{}):s?e.jsx(e.Fragment,{children:s}):a?l?e.jsxs(e.Fragment,{children:["Error: ",l.message]}):e.jsx(e.Fragment,{children:(r==null?void 0:r.title)||e.jsx("span",{style:{color:"var(--card-muted-fg-color)"},children:"Untitled"})}):e.jsxs(e.Fragment,{children:["New ",(t==null?void 0:t.title)||(t==null?void 0:t.name)]})}const _a=d.memo(d.forwardRef(function(t,s){const{onMenuAction:a,onPaneClose:o,onPaneSplit:l,menuItems:r,menuItemGroups:i,schemaType:c,timelineStore:u,ready:h,views:p,unstable_languageFilter:f}=L(),{features:m}=Y(),{index:v,BackLink:g,hasGroupSiblings:w}=re(),{actions:b}=Mn(),x=d.useMemo(()=>On({actionHandler:a,fieldActions:b,menuItems:r,menuItemGroups:i}),[a,b,i,r]),P=d.useMemo(()=>x.filter(zn),[x]),S=d.useMemo(()=>x.filter(Ln),[x]),I=p.length>1,E=ie(u,C=>C.revTime),{collapsed:y,isLast:j}=Oe(),_=j&&!y?-1:0,T=m.splitViews&&l&&p.length>1,k=T&&w,O=!k&&!m.backButton;return e.jsx(ze,{ref:s,loading:!h,title:e.jsx(ya,{}),tabs:I&&e.jsx(ba,{}),tabIndex:_,backButton:m.backButton&&v>0&&e.jsx(B,{as:g,"data-as":"a",icon:An,mode:"bleed",padding:2}),subActions:e.jsx(Bn,{chunk:E,mode:"rev",placement:"bottom-end"}),actions:e.jsxs(M,{align:"center",gap:1,children:[f.length>0&&e.jsx(e.Fragment,{children:f.map((C,z)=>d.createElement(C,{key:"language-filter-".concat(z),schemaType:c}))}),P.map(C=>e.jsx(Nn,{node:C},C.key)),e.jsx(Wn,{nodes:S},"context-menu"),T&&e.jsx(ee,{content:e.jsx(R,{size:1,style:{whiteSpace:"nowrap"},children:"Split pane right"}),padding:2,placement:"bottom",portal:!0,children:e.jsx(B,{"aria-label":"Split pane right",icon:Fn,mode:"bleed",onClick:l},"split-pane-button")}),k&&e.jsx(B,{icon:Ie,mode:"bleed",onClick:o,title:"Close split pane"},"close-view-button"),O&&e.jsx(B,{icon:Ie,mode:"bleed",title:"Close pane group",as:g},"close-view-button")]})})}));var mt=Object.freeze,Pa=Object.defineProperty,wa=(n,t)=>mt(Pa(n,"raw",{value:mt(t||n.slice())})),xt;const Sa=A(D)({position:"relative"}),Ia=A(Gs)(n=>{let{$disabled:t}=n;return t?{height:"100%"}:kt(xt||(xt=wa([`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `])))}),Ca=function(t){const{footerHeight:s,isInspectOpen:a,rootElement:o,setDocumentPanelPortalElement:l}=t,{activeViewId:r,displayed:i,documentId:c,editState:u,inspector:h,value:p,views:f,ready:m,schemaType:v,permissions:g,isPermissionsLoading:w,isDeleting:b,isDeleted:x,timelineStore:P,formState:S}=L(),{collapsed:I}=Ae(),{collapsed:E}=Oe(),y=Gt(),{features:j}=Y(),[_,T]=d.useState(null),k=xe(_),O=d.useRef(null),[C,z]=d.useState(null),N=d.useRef(null),W=p._createdAt?"update":"create",ce=d.useMemo(()=>{if(S)return S.groups.find(te=>te.selected)},[S]),F=d.useMemo(()=>f.find(te=>te.id===r)||f[0]||{type:"form"},[r,f]),G=j.splitPanes&&O.current||y.element,H=d.useMemo(()=>I?[(k==null?void 0:k.height)||0,0,s?s+2:2,0]:[0,0,2,0],[I,s,k]),hn=F.type!=="form",fn=d.useMemo(()=>F.type==="component"&&F.component&&d.createElement(F.component,{document:{draft:(u==null?void 0:u.draft)||null,displayed:i||p,historical:i,published:(u==null?void 0:u.published)||null},documentId:c,options:F.options,schemaType:v}),[F,i,c,u==null?void 0:u.draft,u==null?void 0:u.published,v,p]),mn=ie(P,te=>te.lastNonDeletedRevId);d.useEffect(()=>{C!=null&&C.scrollTo&&C.scrollTo(0,0)},[c,C]),d.useEffect(()=>{G&&l(G)},[G,l]);const xn=d.useMemo(()=>a?e.jsx(ea,{value:i||p}):null,[a,i,p]),Ve=!!(!E&&h);return e.jsxs(e.Fragment,{children:[e.jsx(_a,{ref:T}),e.jsx(me,{children:e.jsxs(M,{height:"fill",children:[(j.resizablePanes||!Ve)&&e.jsx(Sa,{flex:2,overflow:"hidden",children:e.jsx(ge,{element:G,__unstable_elements:{documentScrollElement:C},children:e.jsx(Ge,{element:C,children:e.jsxs(cs,{scrollElement:C,containerElement:N,children:[F.type==="form"&&!w&&m&&e.jsxs(e.Fragment,{children:[e.jsx(da,{granted:!!(g!=null&&g.granted),requiredPermission:W}),!b&&x&&e.jsx(oa,{revisionId:mn}),e.jsx(ln,{})]}),e.jsxs(Ia,{$disabled:I||!1,"data-testid":"document-panel-scroller",ref:z,children:[e.jsx(xa,{hidden:hn,margins:H,ref:N},c+(m?"_ready":"_pending")),fn]},"".concat(ce==null?void 0:ce.name,"-").concat(c,"}")),xn,e.jsx("div",{"data-testid":"document-panel-portal",ref:O})]})})})}),Ve&&e.jsx(Ge,{element:o,children:e.jsx(po,{documentId:c,documentType:v.name,flex:1})})]})})]})},cn=["left","bottom"],Ea={small:0,medium:1,large:2,full:"auto"};function Ta(n){const{dialog:t,referenceElement:s}=n;return e.jsx(Jt,{content:e.jsx(Da,{dialog:t}),fallbackPlacements:cn,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:s})}function Da(n){const{dialog:t}=n,{cancelButtonIcon:s,cancelButtonText:a,confirmButtonIcon:o,confirmButtonText:l,message:r,onCancel:i,onConfirm:c,tone:u}=t,{isTopLayer:h}=qt(),[p,f]=d.useState(null),m=d.useCallback(()=>{h&&i()},[h,i]),v=d.useCallback(g=>{g.key==="Escape"&&h&&i()},[h,i]);return Zt(m,[p]),Qt(v),e.jsxs(M,{direction:"column",ref:f,style:{minWidth:320-16,maxWidth:400},children:[e.jsx(D,{flex:1,overflow:"auto",padding:4,children:e.jsx(R,{children:r})}),e.jsx(D,{paddingX:4,paddingY:3,style:{borderTop:"1px solid var(--card-border-color)"},children:e.jsxs(Ks,{columns:2,gap:2,children:[e.jsx(B,{icon:s,onClick:i,mode:"ghost",text:a||"Cancel"}),e.jsx(B,{icon:o,onClick:c,text:l||"Confirm",tone:u})]})})]})}function Ra(n){const{dialog:t}=n,s=d.useId(),a=t.footer&&e.jsx(D,{paddingX:4,paddingY:3,children:t.footer});return e.jsx(Be,{zOffset:"fullscreen",children:e.jsx(We,{__unstable_hideCloseButton:t.showCloseButton===!1,footer:a,header:t.header,id:s,onClose:t.onClose,onClickOutside:t.onClose,width:t.width===void 0?1:Ea[t.width],children:e.jsx(D,{padding:4,children:t.content})})})}function ka(n){const{dialog:t,referenceElement:s}=n;return e.jsx(Jt,{content:e.jsx(Ma,{dialog:t}),fallbackPlacements:cn,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:s})}function Ma(n){const{dialog:t}=n,{content:s,onClose:a}=t,{isTopLayer:o}=qt(),[l,r]=d.useState(null),i=d.useCallback(()=>{o&&a()},[o,a]),c=d.useCallback(u=>{u.key==="Escape"&&o&&a()},[o,a]);return Zt(i,[l]),Qt(c),e.jsx("div",{ref:r,children:s})}function gt(n){const{children:t}=n,{element:s,elements:a}=Gt(),o=(a==null?void 0:a[Bt])||s;return e.jsx(ge,{element:o,children:t})}function $e(n){const{dialog:t,referenceElement:s=null}=n,a=d.useId();if(t.type==="confirm")return e.jsx(Ta,{dialog:t,referenceElement:s});if(t.type==="popover")return e.jsx(ka,{dialog:t,referenceElement:s});if(t.type==="dialog"||!t.type)return e.jsx(gt,{children:e.jsx(Ra,{dialog:t})});if(t.type==="custom")return e.jsx(gt,{children:t==null?void 0:t.component});const o=t;return console.warn("Unsupported modal type ".concat(o.type)),e.jsx(We,{id:a,onClose:o.onClose,onClickOutside:o.onClose,width:2,children:e.jsx(D,{padding:4,children:o.content||e.jsxs(e.Fragment,{children:["Unexpected modal type (",e.jsx("code",{children:o.type}),")"]})})})}function Oa(n){const{actionStates:t,disabled:s}=n,a=d.useId(),o=d.useRef(null),[l,r]=d.useState(-1),[i,c]=d.useState(null),u=d.useCallback(f=>{r(f)},[]),h=d.useMemo(()=>({placement:"top-end",portal:!0,preventOverflow:!0}),[]),p=t[l];return e.jsxs(e.Fragment,{children:[e.jsx(Ms,{id:"".concat(a,"-action-menu"),button:e.jsx(B,{"data-testid":"action-menu-button","aria-label":"Open document actions",disabled:s,icon:Os,mode:"ghost",ref:o}),menu:e.jsx(zs,{padding:1,children:t.map((f,m)=>e.jsx(za,{actionState:f,disabled:s,index:m,onAction:u},m))}),popover:h,ref:c}),p&&p.dialog&&e.jsx(Be,{zOffset:"paneFooter",children:e.jsx($e,{dialog:p.dialog,referenceElement:i})})]})}function za(n){const{actionState:t,disabled:s,index:a,onAction:o}=n,{onHandle:l}=t,r=d.useCallback(()=>{o(a),l&&l()},[a,o,l]),i=t.title&&e.jsx(D,{padding:2,children:e.jsx(R,{size:1,children:t.title})});return e.jsx(Ls,{"data-testid":"action-".concat(t.label.replace(" ","")),disabled:s||!!t.disabled,onClick:r,padding:0,tone:t.tone,children:e.jsx(ee,{content:i,disabled:!i,fallbackPlacements:["left","bottom"],placement:"top",portal:!0,children:e.jsxs(M,{align:"center",paddingX:3,children:[e.jsxs(M,{flex:1,paddingY:3,children:[t.icon&&e.jsx(D,{marginRight:3,children:e.jsxs(R,{children:[d.isValidElement(t.icon)&&t.icon,As.isValidElementType(t.icon)&&d.createElement(t.icon)]})}),e.jsx(R,{children:t.label})]}),t.shortcut&&e.jsx(D,{marginLeft:3,children:e.jsx(Kt,{keys:String(t.shortcut).split("+").map(c=>c.slice(0,1).toUpperCase()+c.slice(1))})})]})})})}function dn(n){const{disabled:t,showMenu:s,states:a}=n,[o,...l]=a,[r,i]=d.useState(null),c=d.useMemo(()=>!o||!o.title&&!o.shortcut?null:e.jsxs(M,{padding:2,style:{maxWidth:300},align:"center",children:[e.jsx(R,{size:1,children:o.title}),o.shortcut&&e.jsx(D,{marginLeft:o.title?2:0,children:e.jsx(Kt,{keys:String(o.shortcut).split("+").map(u=>u.slice(0,1).toUpperCase()+u.slice(1).toLowerCase())})})]}),[o]);return e.jsxs(M,{children:[o&&e.jsx(ds,{zOffset:200,children:e.jsx(ee,{disabled:!c,content:c,portal:!0,placement:"top",children:e.jsx(V,{flex:1,children:e.jsx(B,{"data-testid":"action-".concat(o.label),disabled:t||!!o.disabled,icon:o.icon,onClick:o.onHandle,ref:i,text:o.label,tone:o.tone||"primary"})})})}),s&&l.length>0&&e.jsx(D,{marginLeft:1,children:e.jsx(Oa,{actionStates:l,disabled:t})}),o&&o.dialog&&e.jsx($e,{dialog:o.dialog,referenceElement:r})]})}const La=d.memo(function(){const{actions:t,connectionState:s,documentId:a,editState:o}=L();return!t||!o?null:e.jsx(Fe,{actions:t,actionProps:o,children:l=>{let{states:r}=l;return e.jsx(dn,{disabled:s!=="connected",showMenu:t.length>1,states:r},a)}})}),Aa=d.memo(function(){const{connectionState:t,editState:s,timelineStore:a}=L(),o=ie(a,u=>u.revTime),l=(o==null?void 0:o.id)||"",r=((s==null?void 0:s.draft)||(s==null?void 0:s.published)||{})._rev===l,i=d.useMemo(()=>({...s||{},revision:l}),[s,l]),c=d.useMemo(()=>[$n],[]);return e.jsx(Fe,{actions:c,actionProps:i,children:u=>{let{states:h}=u;return e.jsx(dn,{disabled:t!=="connected"||!!r,showMenu:!1,states:h})}})}),Ba={primary:"primary",success:"positive",warning:"caution",danger:"critical"};function Na(n){let{states:t}=n;return e.jsx(Bs,{space:1,children:t.map((s,a)=>e.jsx(ee,{content:s.title&&e.jsx(D,{padding:2,children:e.jsx(R,{size:1,children:s.title})}),disabled:!s.title,placement:"top",portal:!0,children:e.jsx(Ns,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:s.color?Ba[s.color]:void 0,style:{whiteSpace:"nowrap"},children:s.label})},String(a)))})}function Wa(){const{badges:n,editState:t}=L();return!t||!n?null:e.jsx(so,{badges:n,badgeProps:t,children:s=>{let{states:a}=s;return e.jsx(Na,{states:a})}})}var vt=Object.freeze,Fa=Object.defineProperty,$a=(n,t)=>vt(Fa(n,"raw",{value:vt(t||n.slice())})),bt;const Ha=A(M)(bt||(bt=$a([`
  cursor: default;
`])));function Va(n){const{collapsed:t,disabled:s,lastPublished:a,lastUpdated:o,liveEdit:l}=n,r=$(a||"",{minimal:!0,agoSuffix:!0}),i=$(a||"",{minimal:!0}),c=$(o||"",{minimal:!0,agoSuffix:!0}),u=$(o||"",{minimal:!0}),h=$(o||"",{minimal:!1,agoSuffix:!0}),p=$(a||"",{minimal:!1,agoSuffix:!0}),f=l?"Last updated ".concat(h):"Last published ".concat(p);return e.jsx(Ha,{align:"center","data-ui":"SessionLayout",sizing:"border",children:e.jsx(ee,{placement:"top",portal:!0,content:e.jsx(V,{padding:3,space:3,children:e.jsx(R,{size:1,children:l?e.jsxs(e.Fragment,{children:["Last updated"," ",e.jsx("abbr",{"aria-label":o?h:p,children:o?c:r})]}):e.jsxs(e.Fragment,{children:["Last published ",e.jsx("abbr",{"aria-label":p,children:r})]})})}),children:e.jsx(B,{mode:"bleed",tone:l?"critical":"positive",tabIndex:-1,disabled:s,"aria-label":f,children:e.jsxs(M,{align:"center",children:[e.jsx(D,{marginRight:t?0:3,children:e.jsx(R,{size:2,"aria-hidden":"true",children:l?e.jsx(us,{}):e.jsx(ps,{})})}),!t&&e.jsx(R,{size:1,weight:"medium",children:l?e.jsx("abbr",{"aria-label":f,children:o?u:i}):e.jsx("abbr",{"aria-label":f,children:i})})]})})})})}var jt=Object.freeze,Ua=Object.defineProperty,He=(n,t)=>jt(Ua(n,"raw",{value:jt(t||n.slice())})),yt,_t,Pt;const Ga=A(le.path)(yt||(yt=He([`
  transform-origin: center;
`]))),Ka=n=>e.jsx(le.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...n}),Xa=n=>e.jsx(Ga,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...n}),Ya=n=>e.jsx(le.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...n}),Ja=n=>e.jsx(le.path,{d:"M15 7L18 10M6 19L7 15L17 5L20 8L10 18L6 19Z",...n}),qa=Hn(_t||(_t=He([`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`]))),Za=A.g(Pt||(Pt=He([`
  transform-origin: center;

  &[data-rotate] {
    animation: `,` 1s ease-in-out infinite;
  }
`])),qa),Qa={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},er={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},tr={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},nr={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}},sr={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:0,transition:{duration:0}},changes:{pathLength:1,transition:{duration:.4,delay:.5}}};function or(n){const{status:t}=n;return t?e.jsx("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"",children:e.jsxs(le.g,{variants:Qa,initial:t,animate:t,children:[e.jsxs(Za,{"data-rotate":t==="changes"?void 0:"",children:[e.jsx(Xa,{variants:tr,initial:t,animate:t}),e.jsx(Ka,{variants:er,initial:t,animate:t})]}),e.jsx(Ya,{variants:nr,initial:t,animate:t}),e.jsx(Ja,{variants:sr,initial:t,animate:t})]})}):null}const ar=Le.forwardRef(function(t,s){const{collapsed:a,status:o,lastUpdated:l,...r}=t,i=$(l||"",{minimal:!0}),c=$(l||"",{minimal:!0,agoSuffix:!0}),u=$(l||"",{minimal:!1,agoSuffix:!0}),h=d.useMemo(()=>o==="syncing"?{text:"Saving...",tone:void 0}:o==="changes"?{text:i,tone:"caution"}:o==="saved"?{text:"Saved!",tone:"positive"}:{},[o,i]);return o?e.jsx(ee,{placement:"top",portal:!0,disabled:o!=="changes",content:e.jsxs(V,{padding:3,space:3,children:[e.jsx(R,{size:1,weight:"semibold",children:"Review changes"}),e.jsxs(R,{size:1,muted:!0,children:["Changes saved ",e.jsx("abbr",{"aria-label":u,children:c})]})]}),children:e.jsx(B,{mode:"bleed",justify:"flex-start",tone:h==null?void 0:h.tone,...r,"data-testid":"review-changes-button",ref:s,"aria-label":"Review changes",children:e.jsxs(M,{align:"center",children:[e.jsx(D,{marginRight:a?0:3,"aria-hidden":"true",children:e.jsx(R,{children:e.jsx(or,{status:o})})}),!a&&e.jsx(R,{size:1,weight:"medium",children:h==null?void 0:h.text})]})})}):null}),rr=Le.memo(ar),ir=1e3,lr=3e3,cr=d.memo(function(){var t;const{changesOpen:s,documentId:a,documentType:o,editState:l,onHistoryClose:r,onHistoryOpen:i,timelineStore:c,value:u}=L(),h=Vn(a,o),p=u==null?void 0:u._updatedAt,f=(t=l==null?void 0:l.published)==null?void 0:t._updatedAt,m=!!(l!=null&&l.liveEdit),v=!!(l!=null&&l.published),g=!!(l!=null&&l.draft),[w,b]=d.useState(null),x=xe(w),P=!x||(x==null?void 0:x.width)<300,[S,I]=d.useState(null),E=ie(c,_=>_.onOlderRevision);d.useEffect(()=>{if(S==="syncing"&&!h.isSyncing){const _=setTimeout(()=>I("saved"),ir);return()=>clearTimeout(_)}if(S==="saved"){const _=setTimeout(()=>I(null),lr);return()=>clearTimeout(_)}},[S,p,h.isSyncing]),d.useLayoutEffect(()=>{I(null)},[a]),d.useLayoutEffect(()=>{h.isSyncing&&I("syncing")},[h.isSyncing,p]);const y=d.useMemo(()=>e.jsx(rr,{lastUpdated:p,status:S||(g?"changes":void 0),onClick:s?r:i,disabled:E,selected:s,collapsed:P}),[g,s,r,i,p,E,S,P]),j=d.useMemo(()=>(m||v)&&e.jsx(D,{marginRight:1,children:e.jsx(Va,{disabled:E,lastPublished:f,lastUpdated:p,liveEdit:m,collapsed:P})}),[P,f,p,m,v,E]);return e.jsxs(M,{align:"center","data-ui":"DocumentSparkline",ref:b,children:[j,e.jsxs(M,{align:"center",flex:1,children:[y,!P&&e.jsx(D,{marginLeft:3,children:e.jsx(Wa,{})})]})]})});var wt=Object.freeze,dr=Object.defineProperty,ur=(n,t)=>wt(dr(n,"raw",{value:wt(t||n.slice())})),St;const pr=A(D)(St||(St=ur([`
  min-width: 10em;
  max-width: 16em;
`])));function hr(n){const{actionsBoxRef:t}=n,{badges:s,timelineStore:a}=L(),o=ie(a,l=>l.onOlderRevision);return d.useMemo(()=>e.jsx(D,{paddingLeft:2,paddingRight:[2,3],paddingY:2,children:e.jsxs(M,{align:"center",children:[e.jsx(D,{flex:[1,2],children:s&&e.jsx(cr,{})}),e.jsx(pr,{flex:1,marginLeft:[1,3],ref:t,children:o?e.jsx(Aa,{}):e.jsx(La,{})})]})}),[t,s,o])}function fr(n){const{actionsBoxElement:t,activeIndex:s,as:a="div",children:o,id:l,onActionStart:r,onKeyDown:i,rootRef:c,states:u,...h}=n,p=u[s],f=d.useCallback(m=>{const v=u.filter(w=>w.shortcut&&Nt(w.shortcut,m)),g=v[0];if(v.length>1&&console.warn('Keyboard shortcut conflict: More than one document action matches the shortcut "'.concat(g.shortcut,'"')),g&&!g.disabled&&g.onHandle){m.preventDefault(),g.onHandle(),r(u.indexOf(g));return}i&&i(m)},[r,i,u]);return d.createElement(a,{id:l,onKeyDown:f,tabIndex:-1,...h,ref:c},[o,p&&p.dialog&&e.jsx(Be,{zOffset:"paneFooter",children:e.jsx($e,{dialog:p.dialog,referenceElement:t})})])}const un=Le.memo(n=>{const{actionsBoxElement:t,as:s="div",children:a,...o}=n,{actions:l,editState:r}=L(),[i,c]=d.useState(-1),u=d.useCallback(p=>{c(p)},[]),h=d.useMemo(()=>r&&{...r,onComplete:()=>{},revision:void 0},[r]);return!h||!l?null:e.jsx(Fe,{actionProps:h,actions:l,children:p=>{let{states:f}=p;return e.jsx(fr,{...o,activeIndex:i,actionsBoxElement:t,as:s,onActionStart:u,states:f,children:a})}})});un.displayName="DocumentActionShortcuts";var It=Object.freeze,mr=Object.defineProperty,xr=(n,t)=>It(mr(n,"raw",{value:It(t||n.slice())})),Ct;const Et=["fixed","fixed","absolute"],gr=A(Xs)(Ct||(Ct=xr([`
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  min-width: 0;
`]))),zr=d.memo(function(t){const{name:s}=Lt();return e.jsx(At,{name:t.pane.source||s,children:e.jsx(vr,{...t})})});function vr(n){var t;const{pane:s,paneKey:a}=n,{resolveNewDocumentOptions:o}=Lt().document,l=re(),r=br(s.options,l.params),{documentType:i,isLoaded:c}=Un(r.id,r.type),u=d.useMemo(()=>o({type:"document",documentId:r.id,schemaType:r.type}),[r.id,r.type,o]),[h,p]=Gn({templateItems:u}),f=c&&!p,m=d.useMemo(()=>f&&i&&r.type!==i?jr(n,r,i):n,[n,i,f,r]),{ReferenceChildLink:v,handleEditReference:g,groupIndex:w,routerPanesState:b}=l,x=((t=b[w+1])==null?void 0:t[0].params)||{},P=b.length,{parentRefPath:S}=x,I=d.useMemo(()=>S?{path:Se(S),state:w>=P-1?"none":w>=P-2?"selected":"pressed"}:{path:[],state:"none"},[S,w,P]);return r.type==="*"&&!f?e.jsx(oe,{flex:2.5,minWidth:320,paneKey:a,title:"Loading document…"}):i?e.jsx(Kn,{...m,children:e.jsx(Xn,{EditReferenceLinkComponent:v,onEditReference:g,initialValueTemplateItems:h,activePath:I,children:e.jsx(yr,{})})},"".concat(i,"-").concat(r.id)):e.jsx(sn,{flex:2.5,minWidth:320,paneKey:a,title:e.jsx(e.Fragment,{children:"The document was not found"}),children:e.jsx(V,{space:4,children:e.jsxs(R,{as:"p",children:["The document type is not defined, and a document with the ",e.jsx("code",{children:r.id})," ","identifier could not be found."]})})})}function br(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=Yn();return d.useMemo(()=>{if(n.type&&n.type!=="*")return n;const a=n.template||t.template,o=a?s.find(r=>r.id===a):void 0,l=o==null?void 0:o.schemaType;return l?{...n,type:l}:n},[n,t.template,s])}function jr(n,t,s){return{...n,pane:{...n.pane,options:{...t,type:s}}}}function yr(){const{changesOpen:n,documentType:t,inspector:s,inspectOpen:a,onFocus:o,onPathOpen:l,onHistoryOpen:r,onKeyUp:i,paneKey:c,schemaType:u,value:h}=L(),{collapsed:p}=Ae(),f=Jn(),[m,v]=d.useState(null),[g,w]=d.useState(null),[b,x]=d.useState(null),[P,S]=d.useState(null),I=xe(g),E=I==null?void 0:I.height,y=d.useCallback(T=>{l(T),o(T)},[l,o]),j=hs+(s?Ee:0),_=fs+(s?Ee:0);return u?e.jsxs(un,{actionsBoxElement:b,as:fe,currentMinWidth:j,"data-testid":"document-pane",flex:2.5,id:c,minWidth:_,onKeyUp:i,rootRef:v,children:[e.jsx(Ue,{position:Et,zOffset:f.portal,children:e.jsx(M,{direction:"column",flex:1,height:p?void 0:"fill",children:e.jsx(gr,{"data-testid":"change-connector-root",isReviewChangesOpen:n,onOpenReviewChanges:r,onSetFocus:y,children:e.jsx(Ca,{footerHeight:E||null,isInspectOpen:a,rootElement:m,setDocumentPanelPortalElement:S})})})}),e.jsx(ge,{__unstable_elements:{[Bt]:P},children:e.jsx(Ue,{position:Et,zOffset:f.portal,children:e.jsx(Zn,{ref:w,children:e.jsx(hr,{actionsBoxRef:x})})})}),e.jsx(Vo,{})]}):e.jsx(sn,{currentMinWidth:j,flex:2.5,minWidth:_,paneKey:c,title:e.jsxs(e.Fragment,{children:["Unknown document type: ",e.jsx("code",{children:t})]}),tone:"caution",children:e.jsxs(V,{space:4,children:[t&&e.jsxs(R,{as:"p",children:["This document has the schema type ",e.jsx("code",{children:t}),", which is not defined as a type in the local content studio schema."]}),!t&&e.jsx(R,{as:"p",children:"This document does not exist, and no schema type was specified for it."}),qn]})})}function _r(){return e.jsx(U,{height:"fill",children:e.jsx(M,{align:"center",height:"fill",justify:"center",padding:4,sizing:"border",children:e.jsx(Q,{width:0,children:e.jsx(U,{padding:4,radius:2,shadow:1,tone:"caution",children:e.jsxs(M,{children:[e.jsx(D,{children:e.jsx(R,{size:1,children:e.jsx(Mt,{})})}),e.jsxs(V,{flex:1,marginLeft:3,space:3,children:[e.jsx(R,{as:"h1",size:1,weight:"bold",children:"No document types"}),e.jsx(R,{as:"p",muted:!0,size:1,children:"Please define at least one document type in your schema."}),e.jsx(R,{as:"p",muted:!0,size:1,children:e.jsx("a",{href:"https://www.sanity.io/docs/create-a-schema-and-configure-sanity-studio",target:"_blank",rel:"noreferrer",children:"Learn how to add a document type →"})})]})]})})})})})}const Pr=n=>{const{documentId:t,documentType:s}=n,a=Ws(t,s),o=Wt(),l=!(a!=null&&a.published)&&!(a!=null&&a.draft),r=(a==null?void 0:a.draft)||(a==null?void 0:a.published),i=o.get(s),{value:c,isLoading:u}=Ut({enabled:!0,schemaType:i,value:r}),h=l?"New ".concat((i==null?void 0:i.title)||(i==null?void 0:i.name)):(c==null?void 0:c.title)||"Untitled",p=a.ready&&!u,f=pn(h);return d.useEffect(()=>{p&&(document.title=f)},[h,p,f]),null},Pe=n=>{const{title:t}=n,s=pn(t);return d.useEffect(()=>{document.title=s},[s,t]),null},wr=n=>{const{resolvedPanes:t}=n;if(!(t!=null&&t.length))return null;const s=t[t.length-1];return Ir(s)?e.jsx(Pe,{}):Sr(s)?s!=null&&s.title?e.jsx(Pe,{title:s.title}):e.jsx(Pr,{documentId:s.options.id,documentType:s.options.type}):e.jsx(Pe,{title:s==null?void 0:s.title})};function pn(n){const t=Y().structureContext.title;return[n,t].filter(s=>s).join(" | ")}function Sr(n){return n!==se&&n.type==="document"}function Ir(n){return n===se}var Tt=Object.freeze,Cr=Object.defineProperty,Er=(n,t)=>Tt(Cr(n,"raw",{value:Tt(t||n.slice())})),Dt;const Tr=A(uo)(Dt||(Dt=Er([`
  min-height: 100%;
  min-width: 320px;
`]))),Dr=Nt("mod+s"),Rr=d.memo(function(t){let{onPaneChange:s}=t;var a;const{push:o}=Me(),l=Wt(),{layoutCollapsed:r,setLayoutCollapsed:i}=Y(),{paneDataItems:c,resolvedPanes:u}=wo(),h=ke(d.useCallback(b=>typeof b.intent=="string",[])),{sanity:{media:p}}=Qn(),[f,m]=d.useState(null),v=d.useCallback(()=>i(!0),[i]),g=d.useCallback(()=>i(!1),[i]);return d.useEffect(()=>{u.length&&s(u)},[s,u]),d.useEffect(()=>{const b=x=>{Dr(x)&&(x.preventDefault(),o({closable:!0,id:"auto-save-message",status:"info",title:"Your work is automatically saved!",duration:4e3}))};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[o]),((a=l._original)==null?void 0:a.types.some(es))?e.jsxs(ge,{element:f||null,children:[e.jsxs(Tr,{flex:1,height:r?void 0:"fill",minWidth:p[1],onCollapse:v,onExpand:g,children:[c.map(b=>{let{active:x,childItemId:P,groupIndex:S,itemId:I,key:E,pane:y,index:j,params:_,path:T,payload:k,siblingIndex:O,selected:C}=b;return e.jsx(d.Fragment,{children:y===se?e.jsx(oe,{paneKey:E,path:T,selected:C}):e.jsx(Wo,{active:x,groupIndex:S,index:j,pane:y,childItemId:P,itemId:I,paneKey:E,params:_,payload:k,path:T,selected:C,siblingIndex:O})},"".concat(y===se?"loading":y.type,"-").concat(j))}),c.length<=1&&h&&e.jsx(oe,{paneKey:"intent-resolver"})]}),e.jsx(wr,{resolvedPanes:u}),e.jsx("div",{"data-portal":"",ref:m})]}):e.jsx(_r,{})});function kr(n){let{tool:{options:t}}=n;const{unstable_sources:s}=ms(),[a]=s,{source:o,defaultDocumentNode:l,structure:r}=t||{};d.useEffect(()=>(be([]),()=>be([])),[]);const[{error:i},c]=d.useState({error:null});return i?e.jsx(ko,{error:i}):e.jsx(xs,{onCatch:c,children:e.jsx(At,{name:o||a.name,children:e.jsxs(gs,{defaultDocumentNode:l,structure:r,children:[e.jsx(Rr,{onPaneChange:be}),e.jsx(Co,{})]})})})}var Lr=Object.freeze({__proto__:null,default:kr});export{zr as DocumentPane,Lr as index,Uo as useDeskToolSetting};
